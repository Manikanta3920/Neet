import './polyfills.server.mjs';
import{G as n,L as d,Xb as c,ba as l,ka as g}from"./chunk-X5UWJYRQ.mjs";import{a as i,b as r}from"./chunk-T55IDOPT.mjs";var u=class o{tasksSignal=l([]);tasks=this.tasksSignal.asReadonly();STORAGE_KEY="for-her-tasks";platformId=d(g);isBrowser=c(this.platformId);constructor(){this.loadTasks()}loadTasks(){if(this.isBrowser){let t=localStorage.getItem(this.STORAGE_KEY);if(t)try{let s=JSON.parse(t).map(a=>r(i({},a),{createdAt:new Date(a.createdAt),dueDate:a.dueDate?new Date(a.dueDate):void 0}));this.tasksSignal.set(s);return}catch(e){console.error("Error loading tasks:",e)}}this.tasksSignal.set(this.getDefaultTasks())}saveTasks(){this.isBrowser&&localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.tasksSignal()))}getDefaultTasks(){return[{id:this.generateId(),title:"Revise Organic Chemistry - Name Reactions",subject:"Chemistry",priority:"High",duration:120,dueDate:new Date(new Date().setDate(new Date().getDate()+2)).toISOString(),completed:!1,createdAt:new Date,notes:"Focus on mechanisms",toRevise:!0},{id:this.generateId(),title:"Solve Physics Optics PYQs",subject:"Physics",priority:"High",duration:90,dueDate:new Date(new Date().setDate(new Date().getDate()+1)).toISOString(),completed:!0,createdAt:new Date(Date.now()-864e5),notes:"Last 5 years",toRevise:!1},{id:this.generateId(),title:"Study Human Physiology - Circulatory System",subject:"Zoology",priority:"Medium",duration:60,completed:!1,createdAt:new Date,notes:"Important for NEET",toRevise:!1}]}generateId(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}addTask(t){let e=r(i({},t),{id:this.generateId(),createdAt:new Date});this.tasksSignal.update(s=>[...s,e]),this.saveTasks()}updateTask(t,e){this.tasksSignal.update(s=>s.map(a=>a.id===t?i(i({},a),e):a)),this.saveTasks()}deleteTask(t){this.tasksSignal.update(e=>e.filter(s=>s.id!==t)),this.saveTasks()}toggleComplete(t){this.tasksSignal.update(e=>e.map(s=>s.id===t?r(i({},s),{completed:!s.completed}):s)),this.saveTasks()}toggleRevise(t){this.tasksSignal.update(e=>e.map(s=>s.id===t?r(i({},s),{toRevise:!s.toRevise}):s)),this.saveTasks()}getTasksBySubject(t){return this.tasksSignal().filter(e=>e.subject===t)}getHighPriorityTasks(){return this.tasksSignal().filter(t=>t.priority==="High")}getTasksDueToday(){let t=new Date().toDateString();return this.tasksSignal().filter(e=>e.dueDate&&new Date(e.dueDate).toDateString()===t)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})};export{u as a};
